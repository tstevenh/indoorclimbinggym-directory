---
/**
 * SearchBar Component
 * Search input for finding gyms by location or name
 */

interface Props {
  placeholder?: string;
  initialValue?: string;
  large?: boolean; // Use larger size for hero sections
}

const {
  placeholder = 'Search by city, state, or gym name...',
  initialValue = '',
  large = false,
} = Astro.props;

const inputClasses = large
  ? 'w-full px-6 py-4 text-lg rounded-lg border-2 border-gray-300 focus:border-sage focus:outline-none focus:ring-2 focus:ring-sage focus:ring-opacity-50'
  : 'w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-sage focus:outline-none focus:ring-2 focus:ring-sage focus:ring-opacity-50';

const buttonClasses = large
  ? 'px-8 py-4 bg-sage text-white font-semibold rounded-lg hover:bg-opacity-90 transition-colors text-lg'
  : 'px-6 py-3 bg-sage text-white font-medium rounded-lg hover:bg-opacity-90 transition-colors';
---

<form action="/search" method="get" class="w-full" role="search">
  <div class="flex gap-3">
    <div class="flex-1">
      <label for="search-input" class="sr-only">Search gyms</label>
      <input
        type="search"
        id="search-input"
        name="q"
        value={initialValue}
        placeholder={placeholder}
        class={inputClasses}
        autocomplete="off"
        aria-label="Search climbing gyms"
      />
    </div>
    <button type="submit" class={buttonClasses} aria-label="Submit search">
      <svg
        class="w-5 h-5 inline-block mr-2"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
      </svg>
      Search
    </button>
  </div>
</form>

<script>
  // Add client-side search suggestions (optional enhancement)
  const searchInput = document.getElementById('search-input') as HTMLInputElement;

  if (searchInput) {
    searchInput.addEventListener('input', (e) => {
      const query = (e.target as HTMLInputElement).value;
      // Future: Add autocomplete suggestions here
      console.log('Search query:', query);
    });
  }
</script>
