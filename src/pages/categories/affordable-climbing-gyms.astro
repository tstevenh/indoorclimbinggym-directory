---
/**
 * Affordable Climbing Gyms Category Page
 * Target keyword: "affordable climbing gyms"
 * SEO-optimized landing page for budget-friendly climbing gyms
 */

import BaseLayout from '../../layouts/BaseLayout.astro';

export const prerender = true;
import GymCard from '../../components/GymCard.astro';
import Pagination from '../../components/Pagination.astro';
import { generateSEO } from '../../utils/seo';
import { generateItemListSchema, generateFAQSchema } from '../../utils/schema';
import { fetchGyms } from '../../config/api';

// Fetch gyms from API
const gymsData = await fetchGyms();

// Filter gyms with affordable day pass prices (<=20)
const affordableGyms = gymsData.filter(gym =>
  gym.day_pass_price_local <= 20
).sort((a, b) => a.day_pass_price_local - b.day_pass_price_local);

// Pagination logic
const GYMS_PER_PAGE = 12;
const currentPage = parseInt(Astro.url.searchParams.get('page') || '1');
const totalPages = Math.ceil(affordableGyms.length / GYMS_PER_PAGE);
const startIndex = (currentPage - 1) * GYMS_PER_PAGE;
const endIndex = startIndex + GYMS_PER_PAGE;
const paginatedGyms = affordableGyms.slice(startIndex, endIndex);

const pageUrl = 'https://www.indoorclimbinggym.com/categories/affordable-climbing-gyms';
const pageTitle = 'Affordable Climbing Gyms | Budget-Friendly Options';
const pageDescription = 'Find affordable climbing gyms with low day pass prices and great value. Quality climbing facilities that do not break the bank.';

// SEO data
const seoData = generateSEO({
  title: pageTitle,
  description: pageDescription,
  canonical: pageUrl,
  keywords: ['affordable climbing gyms', 'cheap climbing gym', 'budget climbing', 'low cost climbing gym', 'climbing gym deals'],
});

// FAQ data
const faqs = [
  {
    question: 'What makes a climbing gym affordable?',
    answer: 'Affordable climbing gyms typically charge $20 or less for day passes and under $75 for monthly memberships. These gyms prioritize accessibility over luxury amenities, focusing on quality climbing terrain and safety while keeping operational costs lower. Many are community-focused, member-owned cooperatives or independent gyms rather than large chains.',
  },
  {
    question: 'Do affordable climbing gyms sacrifice quality?',
    answer: 'Not at all! Many affordable gyms offer excellent route setting, well-maintained facilities, and strong communities. They simply focus resources on climbing quality rather than expensive extras like cafes, saunas, or elaborate decor. Some of the most beloved gyms in climbing communities are affordable, grassroots facilities with dedicated staff and passionate members.',
  },
  {
    question: 'How can I save money at climbing gyms?',
    answer: 'Purchase monthly memberships if you climb 2+ times weekly (usually breaks even after 3-4 visits). Look for student, military, or senior discounts. Many gyms offer punch cards for 10-20 visits at discounted rates. Consider off-peak memberships, annual prepayment discounts, or partner discounts. Some gyms have volunteer programs offering free membership for facility work.',
  },
  {
    question: 'Are there free or low-cost climbing options?',
    answer: 'Some outdoor climbing areas are free to access (bring your own gear). University climbing walls often allow community access at student rates. A few gyms offer scholarship programs for low-income climbers. Look for free trial days, first-time visitor specials, or community climb nights with discounted rates.',
  },
  {
    question: 'What is included in budget gym memberships?',
    answer: 'Most affordable gyms include full climbing access (bouldering and/or ropes), basic amenities like lockers and restrooms, and sometimes introductory instruction. Gear rental typically costs extra ($3-7). Premium features like yoga classes, saunas, or personal training may not be available, but core climbing experiences remain excellent.',
  },
  {
    question: 'Do affordable gyms offer classes and instruction?',
    answer: 'Yes! Most budget-friendly gyms provide intro classes, belay certification, and technique workshops, though perhaps less frequently than premium gyms. Classes may cost extra rather than being included in membership. Many affordable gyms foster strong communities where experienced climbers informally help beginners, creating valuable learning opportunities.',
  },
  {
    question: 'Should beginners choose affordable gyms?',
    answer: 'Absolutely! Affordable gyms are excellent for beginners wanting to explore climbing without major financial commitment. You will get quality instruction and climbing access at lower cost. Once you are certain about continuing, you can always upgrade to facilities with more amenities. Many experienced climbers prefer affordable gyms for their authentic, community-focused atmosphere.',
  },
];

// Generate schemas
const itemListSchema = generateItemListSchema(
  affordableGyms,
  'Affordable Climbing Gyms',
  pageUrl
);

const faqSchema = generateFAQSchema(faqs);

const combinedSchema = {
  '@context': 'https://schema.org',
  '@graph': [itemListSchema, faqSchema],
};

// Breadcrumbs
const breadcrumbs = [
  { label: 'Home', url: '/' },
  { label: 'Categories', url: '/categories' },
  { label: 'Affordable Gyms', url: `/categories/affordable-climbing-gyms` },
];

// Stats
const avgRating = (affordableGyms.reduce((sum, gym) => sum + gym.rating, 0) / affordableGyms.length).toFixed(1);
const avgPrice = Math.round(affordableGyms.reduce((sum, gym) => sum + gym.day_pass_price_local, 0) / affordableGyms.length);
const lowestPrice = Math.min(...affordableGyms.map(g => g.day_pass_price_local));
---

<BaseLayout
  title={seoData.title}
  description={seoData.description}
  canonical={seoData.canonical}
  keywords={seoData.keywords.split(', ')}
  schema={combinedSchema}
  breadcrumbs={breadcrumbs}
>
  <!-- Breadcrumb Navigation -->
  <nav class="text-sm mb-6" aria-label="Breadcrumb">
    <ol class="flex items-center gap-2">
      {breadcrumbs.map((crumb, index) => (
        <li class="flex items-center gap-2">
          {index > 0 && <span class="text-gray-400">/</span>}
          {index === breadcrumbs.length - 1 ? (
            <span class="text-sage font-medium">{crumb.label}</span>
          ) : (
            <a href={crumb.url} class="text-granite hover:text-sage">
              {crumb.label}
            </a>
          )}
        </li>
      ))}
    </ol>
  </nav>

  <!-- Hero Section -->
  <header class="mb-12">
    <h1 class="text-4xl md:text-5xl font-bold text-granite mb-4">
      Affordable Climbing Gyms
    </h1>
    <p class="text-xl text-gray-700 mb-6 leading-relaxed">
      Quality climbing should not break the bank. These budget-friendly gyms offer excellent routes, safety standards, and welcoming communities at prices that make regular climbing accessible to everyone. Climb more, spend less.
    </p>

    <!-- Quick Stats -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 bg-white p-6 rounded-lg shadow-md">
      <div>
        <p class="text-3xl font-bold text-sage">{affordableGyms.length}</p>
        <p class="text-sm text-gray-600">Affordable Gyms</p>
      </div>
      <div>
        <p class="text-3xl font-bold text-sage">{avgRating}★</p>
        <p class="text-sm text-gray-600">Average Rating</p>
      </div>
      <div>
        <p class="text-3xl font-bold text-sage">${avgPrice}</p>
        <p class="text-sm text-gray-600">Avg Day Pass</p>
      </div>
      <div>
        <p class="text-3xl font-bold text-sage">${lowestPrice}</p>
        <p class="text-sm text-gray-600">Lowest Day Pass</p>
      </div>
    </div>
  </header>

  <!-- Top Affordable Gyms Grid -->
  <section class="mb-16">
    <h2 class="text-3xl font-bold text-granite mb-6">Best Value Climbing Gyms</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {paginatedGyms.map(gym => (
        <GymCard gym={gym} showCity={true} />
      ))}
    </div>

    <!-- Pagination -->
    <Pagination
      currentPage={currentPage}
      totalPages={totalPages}
      baseUrl="/categories/affordable-climbing-gyms"
    />
  </section>

  <!-- About Affordable Gyms -->
  <section class="mb-16 bg-white p-8 rounded-lg shadow-md">
    <h2 class="text-3xl font-bold text-granite mb-6">Quality Climbing on a Budget</h2>

    <div class="prose prose-lg max-w-none">
      <p class="text-gray-700 mb-4 leading-relaxed">
        The climbing gym industry has experienced explosive growth, and with it came rising prices that price out many potential climbers. Fortunately, affordable climbing gyms prove that quality training environments do not require premium price tags. These facilities prioritize climbing excellence and community accessibility over luxury amenities, creating welcoming spaces where anyone can pursue vertical challenges regardless of income level.
      </p>

      <p class="text-gray-700 mb-4 leading-relaxed">
        What defines an affordable climbing gym? Generally, day passes under twenty dollars and monthly memberships below seventy-five dollars represent excellent value. These gyms achieve lower pricing through various strategies - streamlined operations, community volunteer programs, non-profit structures, or simply prioritizing climber access over profit margins. Many affordable gyms are member-owned cooperatives or grassroots facilities started by passionate local climbing communities.
      </p>

      <h3 class="text-2xl font-bold text-granite mb-4 mt-8">What to Expect from Budget-Friendly Facilities</h3>

      <p class="text-gray-700 mb-4 leading-relaxed">
        Affordable climbing gyms focus resources on what matters most - quality climbing surfaces, regular route setting, and safety equipment maintenance. You will find well-crafted problems and routes that challenge climbers at all levels, though perhaps without the architectural flair or Instagram-worthy aesthetics of premium facilities. Route setting quality often rivals expensive gyms because passionate setters care more about creating excellent climbs than their paychecks.
      </p>

      <p class="text-gray-700 mb-4 leading-relaxed">
        Amenities at budget gyms are typically basic but functional. Expect clean bathrooms, secure storage lockers, and adequate changing areas without spa-level finishes. You probably will not find cafes serving specialty coffee, infrared saunas, or yoga studios. However, the climbing walls themselves - the reason you are there - receive the same attention and investment as pricier alternatives. Many affordable gyms actually have better climbing-to-square-footage ratios than luxury facilities that dedicate space to non-climbing amenities.
      </p>

      <p class="text-gray-700 mb-4 leading-relaxed">
        Community atmosphere often exceeds expensive gyms. Affordable facilities attract climbers who choose to be there for the sport itself rather than trendy social scenes. This creates authentic, tight-knit communities where experienced climbers enthusiastically help beginners and everyone genuinely celebrates each other's progress. The absence of luxury amenities actually fosters more interaction - climbers socialize between burns rather than retreating to separate cafe or lounge areas.
      </p>

      <h3 class="text-2xl font-bold text-granite mb-4 mt-8">Maximizing Value at Affordable Gyms</h3>

      <p class="text-gray-700 mb-4 leading-relaxed">
        Smart climbing budgets start with membership decisions. If you climb twice weekly or more, monthly memberships almost always beat day passes economically. Calculate your break-even point - typically three to four visits monthly. Annual prepayment discounts (often 10-15%) provide additional savings if you are committed long-term. Many affordable gyms offer sliding-scale memberships or financial assistance programs for students, seniors, or low-income community members - always ask about available discounts.
      </p>

      <p class="text-gray-700 mb-4 leading-relaxed">
        Punch cards present excellent value for irregular climbers. Ten-visit passes typically offer 15-25% savings versus individual day passes and never expire, perfect for climbers with unpredictable schedules. Partner or family memberships provide better per-person rates than individual plans. Some gyms offer off-peak memberships restricting access to daytime or non-weekend hours at significantly reduced rates - ideal for remote workers, retirees, or flexible schedules.
      </p>

      <p class="text-gray-700 mb-4 leading-relaxed">
        Volunteer programs at community-focused gyms exchange facility work for free or discounted membership. Route setting assistants, front desk staff, youth program coaches, or maintenance helpers contribute time while staying connected to the climbing community. These arrangements work beautifully for students, between-jobs climbers, or anyone wanting deeper gym involvement. Building relationships through volunteering also provides invaluable climbing knowledge transfer from experienced community members.
      </p>

      <h3 class="text-2xl font-bold text-granite mb-4 mt-8">The Hidden Value of Affordable Gyms</h3>

      <p class="text-gray-700 mb-4 leading-relaxed">
        Beyond direct cost savings, affordable gyms offer intangible benefits that enhance your climbing journey. The lack of pretension and luxury creates environments where beginners feel comfortable learning without judgment. When facilities prioritize climbing over aesthetics, members focus on actual progression rather than appearance or social performance. This authenticity attracts serious climbers who become excellent training partners and mentors.
      </p>

      <p class="text-gray-700 mb-4 leading-relaxed">
        Many affordable gyms maintain stronger connections to outdoor climbing communities. Without elaborate indoor amenities competing for attention, members naturally organize outdoor trips, share beta about local crags, and help newcomers transition to rock. This outdoor focus enriches your climbing experience beyond gym walls and builds skills applicable to real mountains. The grassroots ethos of budget gyms often mirrors traditional climbing culture better than corporate mega-gyms.
      </p>
    </div>
  </section>

  <!-- Comparison Table -->
  <section class="mb-16">
    <h2 class="text-3xl font-bold text-granite mb-6">Affordable Gym Comparison</h2>
    <div class="overflow-x-auto bg-white rounded-lg shadow-md">
      <table class="w-full text-left">
        <thead class="bg-sage text-white">
          <tr>
            <th class="px-6 py-3 font-semibold">Gym Name</th>
            <th class="px-6 py-3 font-semibold">Location</th>
            <th class="px-6 py-3 font-semibold">Rating</th>
            <th class="px-6 py-3 font-semibold">Day Pass</th>
            <th class="px-6 py-3 font-semibold">Membership</th>
            <th class="px-6 py-3 font-semibold">Student Discount</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          {affordableGyms.map((gym, index) => (
            <tr class={index % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>
              <td class="px-6 py-4">
                <a href={`/gyms/${gym.slug}`} class="text-sage hover:underline font-medium">
                  {gym.name}
                </a>
              </td>
              <td class="px-6 py-4 text-gray-700">
                {gym.city}, {gym.region}
              </td>
              <td class="px-6 py-4 font-medium">{gym.rating}★</td>
              <td class="px-6 py-4 text-gray-700 font-bold">${gym.day_pass_price_local}</td>
              <td class="px-6 py-4 text-gray-700">
                ${gym.membership_from_local || 'N/A'}
              </td>
              <td class="px-6 py-4 text-gray-700">
                {gym.student_discount ? '✓' : '—'}
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="mb-16 bg-white p-8 rounded-lg shadow-md">
    <h2 class="text-3xl font-bold text-granite mb-6">Frequently Asked Questions</h2>
    <div class="space-y-6">
      {faqs.map(faq => (
        <div>
          <h3 class="text-xl font-bold text-granite mb-2">{faq.question}</h3>
          <p class="text-gray-700 leading-relaxed">{faq.answer}</p>
        </div>
      ))}
    </div>
  </section>

  <!-- Related Categories -->
  <section class="mb-16">
    <h2 class="text-3xl font-bold text-granite mb-6">Explore More Categories</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      <a
        href="/categories/best-bouldering-climbing-gyms"
        class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow"
      >
        <h3 class="text-lg font-bold text-sage mb-2">Best Bouldering Gyms</h3>
        <p class="text-sm text-gray-600">Top facilities for bouldering</p>
      </a>
      <a
        href="/categories/best-climbing-gyms-for-beginners"
        class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow"
      >
        <h3 class="text-lg font-bold text-sage mb-2">Beginner Friendly Gyms</h3>
        <p class="text-sm text-gray-600">Perfect for newcomers to climbing</p>
      </a>
      <a
        href="/categories/climbing-gyms-with-sauna"
        class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow"
      >
        <h3 class="text-lg font-bold text-sage mb-2">Gyms with Sauna</h3>
        <p class="text-sm text-gray-600">Recovery and relaxation amenities</p>
      </a>
      <a
        href="/categories/climbing-gyms-with-kids-zone"
        class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow"
      >
        <h3 class="text-lg font-bold text-sage mb-2">Gyms with Kids Zone</h3>
        <p class="text-sm text-gray-600">Family-friendly facilities</p>
      </a>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="bg-sage text-white p-8 rounded-lg shadow-md text-center">
    <h2 class="text-3xl font-bold mb-4">Start Climbing Today</h2>
    <p class="text-lg mb-6">
      Find an affordable climbing gym near you and begin your journey without breaking the bank.
    </p>
    <a
      href="/search"
      class="inline-block bg-white text-sage px-8 py-3 rounded-lg font-bold hover:bg-opacity-90 transition-colors"
    >
      Search All Gyms
    </a>
  </section>
</BaseLayout>
