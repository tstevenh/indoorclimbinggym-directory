---
/**
 * Homepage
 * Main landing page with hero, featured gyms, and popular cities
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import GymCard from '../components/GymCard.astro';
import SearchBar from '../components/SearchBar.astro';
import AsSeenOn from '../components/AsSeenOn.astro';
import { generateOrganizationSchema, generateWebSiteSchema } from '../utils/schema';
import { fetchGyms } from '../config/api';
import { getStateCode, getStateSlug, getStateName } from '../utils/states';

export const prerender = true;

// Fetch gyms from API at build time
const gyms = await fetchGyms();

// Get featured gyms (if any)
const allFeaturedGyms = gyms.filter(g => g.featured);

// Get top-rated gyms as fallback
const topRatedGyms = [...gyms].sort((a, b) => {
  // By rating (highest first)
  if (a.rating !== b.rating) return b.rating - a.rating;
  // Then alphabetically
  return a.name.localeCompare(b.name);
});

// Show featured if we have 3+, otherwise show top-rated
const displayGyms = allFeaturedGyms.length >= 3
  ? allFeaturedGyms.slice(0, 6)
  : topRatedGyms.slice(0, 6);

const sectionTitle = allFeaturedGyms.length >= 3
  ? "Featured Climbing Gyms"
  : "Top Rated Climbing Gyms";

// Calculate states by gym count
const stateCounts = gyms.reduce((acc, gym) => {
  const state = gym.region?.toLowerCase();
  if (state) {
    acc[state] = (acc[state] || 0) + 1;
  }
  return acc;
}, {} as Record<string, number>);

// Get top 9 states sorted by gym count
const topStates = Object.entries(stateCounts)
  .sort(([, countA], [, countB]) => countB - countA)
  .slice(0, 9)
  .map(([state, count]) => ({ state, count }));

// Get unique cities (deduplicate by city+region combination)
const uniqueCities = new Map();
gyms.forEach(gym => {
  const key = `${gym.city}-${gym.region}`;
  if (!uniqueCities.has(key)) {
    uniqueCities.set(key, { city: gym.city, region: gym.region, slug: gym.slug });
  }
});
const cities = Array.from(uniqueCities.values());
const popularCities = cities.slice(0, 6);

// Define top 8 curated categories with gym counts
const topCategories = [
  {
    name: 'Best Bouldering Gyms',
    slug: 'best-bouldering-climbing-gyms',
    description: 'Top-rated facilities focused on bouldering excellence',
    count: gyms.filter(g => g.climbing_types?.includes('bouldering')).length
  },
  {
    name: 'For Beginners',
    slug: 'best-climbing-gyms-for-beginners',
    description: 'Welcoming gyms perfect for first-time climbers with intro classes',
    count: gyms.filter(g => g.beginner_friendly).length
  },
  {
    name: 'Best Lead Climbing Gyms',
    slug: 'best-lead-climbing-gyms',
    description: 'Top facilities specializing in lead climbing and endurance',
    count: gyms.filter(g => g.climbing_types?.includes('lead')).length
  },
  {
    name: 'Best Top Rope Gyms',
    slug: 'best-top-rope-climbing-gyms',
    description: 'Gyms featuring tall walls and extensive top rope selections',
    count: gyms.filter(g => g.climbing_types?.includes('top_rope')).length
  },
  {
    name: 'Affordable Gyms',
    slug: 'affordable-climbing-gyms',
    description: 'Budget-friendly climbing gyms with great value',
    count: gyms.filter(g => g.day_pass_price_local && g.day_pass_price_local <= 20).length
  },
  {
    name: 'With Sauna',
    slug: 'climbing-gyms-with-sauna',
    description: 'Recovery-focused gyms with sauna amenities',
    count: gyms.filter(g => g.amenities?.includes('sauna')).length
  },
  {
    name: 'With Kids Zone',
    slug: 'climbing-gyms-with-kids-zone',
    description: 'Family-friendly gyms with dedicated kids areas',
    count: gyms.filter(g => g.amenities?.includes('kids_zone')).length
  },
  {
    name: 'With WiFi',
    slug: 'climbing-gyms-with-wifi',
    description: 'Gyms with dedicated spaces for working and climbing',
    count: gyms.filter(g => g.amenities?.includes('wifi')).length
  },
];

// State utilities imported above

// Generate homepage schemas
const orgSchema = generateOrganizationSchema();
const websiteSchema = generateWebSiteSchema();
const combinedSchema = [orgSchema, websiteSchema];

// Dynamic SEO with counts
const totalGyms = gyms.length;
const uniqueStates = [...new Set(gyms.map(g => g.region))].length;

const title = `Find Climbing Gyms Near You | ${totalGyms}+ Gyms`;
const description = `Search ${totalGyms}+ climbing gyms in ${uniqueStates} states. Compare ratings, prices & amenities. Bouldering, lead & top rope. Free gym finder with reviews.`;
---

<BaseLayout
  title={title}
  description={description}
  schema={combinedSchema}
>
  <!-- Hero Section -->
  <section class="w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] -mt-8 min-h-[600px] bg-[#f8f8f5] py-16 md:py-24 overflow-hidden">
    <!-- Abstract Background Elements (KEPT) -->
    <div class="absolute inset-0 z-0">
      <div class="absolute top-[-20%] right-[-10%] w-[800px] h-[800px] bg-[#98a48b] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
      <div class="absolute top-[20%] left-[-10%] w-[600px] h-[600px] bg-[#e8e6d9] rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"></div>
      <div class="absolute bottom-[-10%] right-[20%] w-[700px] h-[700px] bg-[#98a48b] rounded-full mix-blend-multiply filter blur-3xl opacity-15 animate-blob animation-delay-4000"></div>
    </div>

    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-4xl mx-auto text-center flex flex-col items-center">
        <!-- New Badge (KEPT) -->
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/60 backdrop-blur-md border border-sage/20 shadow-sm mb-8 animate-fade-in-up">
          <span class="relative flex h-3 w-3">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-sage opacity-75"></span>
            <span class="relative inline-flex rounded-full h-3 w-3 bg-sage"></span>
          </span>
          <span class="text-sm font-semibold text-granite tracking-wide uppercase">The #1 Climbing Directory</span>
        </div>

        <!-- Original Title & Description (REVERTED TEXT) -->
        <h1 class="text-4xl md:text-6xl font-bold text-granite mb-6 animate-fade-in-up animation-delay-150">
          Find the Best Indoor Climbing Gyms Near You
        </h1>
        <p class="text-xl md:text-2xl text-granite mb-8 animate-fade-in-up animation-delay-300">
          Your complete guide to indoor climbing gyms across America. Search by location, amenities, and climbing type.
        </p>

        <!-- Hero Search Bar (KEPT WRAPPER) -->
        <div class="w-full max-w-2xl mx-auto mb-12 animate-fade-in-up animation-delay-450">
          <SearchBar large={true} placeholder="Search by city, state, or gym name..." />
        </div>

        <!-- Quick Stats (KEPT NEW STYLING) -->
        <div class="grid grid-cols-3 gap-4 mt-12 max-w-2xl mx-auto w-full animate-fade-in-up animation-delay-600">
          <div class="bg-white/40 backdrop-blur-sm border border-white/50 p-4 rounded-2xl shadow-sm">
            <div class="text-3xl font-bold text-sage">{gyms.length}</div>
            <div class="text-sm text-granite">Gyms</div>
          </div>
          <div class="bg-white/40 backdrop-blur-sm border border-white/50 p-4 rounded-2xl shadow-sm">
            <div class="text-3xl font-bold text-sage">{cities.length}</div>
            <div class="text-sm text-granite">Cities</div>
          </div>
          <div class="bg-white/40 backdrop-blur-sm border border-white/50 p-4 rounded-2xl shadow-sm">
            <div class="text-3xl font-bold text-sage">
              {[...new Set(gyms.map(g => g.region))].length}
            </div>
            <div class="text-sm text-granite">States</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <AsSeenOn />

  <!-- Featured Gyms Section (REVERTED) -->
  <section class="mb-16">
    <div class="flex items-center justify-between mb-8">
      <div>
        <h2 class="text-3xl font-bold text-granite mb-2">{sectionTitle}</h2>
        <p class="text-gray-600">
          {allFeaturedGyms.length >= 3
            ? "Premium climbing gyms featured on our platform"
            : "Highly rated gyms from climbers like you"}
        </p>
      </div>
      <a href="/search/" class="text-sage font-medium hover:underline">
        View All →
      </a>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {displayGyms.map(gym => (
        <GymCard gym={gym} />
      ))}
    </div>
  </section>

  <!-- Leaderboard Banner -->
  <section class="mb-16">
    <div class="bg-white rounded-2xl border border-sage/20 shadow-md p-6 md:p-8 flex flex-col md:flex-row items-start md:items-center justify-between gap-6">
      <div>
        <h2 class="text-2xl md:text-3xl font-bold text-granite mb-2">See how your city ranks this month</h2>
        <p class="text-gray-700">
          Log visits, climb the ranks, and help your community reach the top of the leaderboard.
        </p>
      </div>
      <div class="flex flex-col sm:flex-row gap-3">
        <a
          href="/leaderboard/"
          class="inline-flex items-center justify-center bg-sage text-white px-6 py-3 rounded-xl font-semibold hover:bg-sage/90 transition-colors"
        >
          View Leaderboard
        </a>
        <a
          href={`${import.meta.env.PUBLIC_DASHBOARD_URL || 'https://dashboard.indoorclimbinggym.com'}/signup`}
          class="inline-flex items-center justify-center bg-white border-2 border-sage text-sage px-6 py-3 rounded-xl font-semibold hover:bg-sage/10 transition-colors"
        >
          Join the Competition
        </a>
      </div>
    </div>
  </section>

  <!-- Why Use IndoorClimbingGym.com Section (REVERTED) -->
  <section class="bg-white rounded-lg shadow-md p-6 md:p-12 mb-16">
    <div class="text-center mb-12">
      <h2 class="text-2xl md:text-3xl font-bold text-granite mb-4 break-words px-2">Why Use IndoorClimbingGym.com?</h2>
      <p class="text-gray-600 text-base md:text-lg px-2">Your trusted partner for finding the perfect indoor climbing gym</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      <div class="text-center">
        <div class="w-16 h-16 bg-sage/20 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-8 h-8 text-sage" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
        </div>
        <h3 class="font-bold text-granite mb-2 text-lg">Comprehensive Directory</h3>
        <p class="text-gray-600 text-sm">
          15+ climbing gyms across 5 major cities, from bouldering havens to full-service facilities
        </p>
      </div>

      <div class="text-center">
        <div class="w-16 h-16 bg-sage/20 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-8 h-8 text-sage" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <h3 class="font-bold text-granite mb-2 text-lg">Detailed Information</h3>
        <p class="text-gray-600 text-sm">
          Hours, prices, amenities, and directions for every gym—everything you need to plan your visit
        </p>
      </div>

      <div class="text-center">
        <div class="w-16 h-16 bg-sage/20 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-8 h-8 text-sage" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
          </svg>
        </div>
        <h3 class="font-bold text-granite mb-2 text-lg">Smart Filters</h3>
        <p class="text-gray-600 text-sm">
          Find gyms by climbing type, amenities, budget, and location—exactly what you're looking for
        </p>
      </div>

      <div class="text-center">
        <div class="w-16 h-16 bg-sage/20 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-8 h-8 text-sage" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
          </svg>
        </div>
        <h3 class="font-bold text-granite mb-2 text-lg">Expert Guides</h3>
        <p class="text-gray-600 text-sm">
          Learn about climbing techniques, gear, gym etiquette, and training tips from experienced climbers
        </p>
      </div>
    </div>
  </section>

  <!-- Explore Climbing Gyms by Region Section (REVERTED) -->
  <section class="mb-16 bg-gradient-to-br from-sage/10 to-ivory rounded-lg p-8 md:p-12">
    <div class="max-w-4xl mx-auto">
      <h2 class="text-3xl font-bold text-granite mb-4 text-center">Explore Indoor Climbing Gyms by Region</h2>
      <p class="text-gray-700 leading-relaxed text-center">
        From the Pacific Northwest's legendary bouldering scene in Seattle to the booming climbing community in Denver,
        indoor climbing gyms are transforming how people experience vertical sports. Whether you're in Texas's sunny Austin,
        California's vibrant Los Angeles, or New York City's bustling boroughs, there's a climbing gym waiting for you.
        Each region brings its unique climbing culture, from competitive bouldering walls to family-friendly facilities with
        beginner classes and youth programs.
      </p>
    </div>
  </section>

  <!-- Browse by State Section (KEPT NEW STYLING) -->
  <section class="mb-16">
    <div class="flex justify-between items-center mb-8">
      <div>
        <h2 class="text-3xl font-bold text-granite mb-2">Browse by State</h2>
        <p class="text-gray-600">Find climbing gyms across America by state</p>
      </div>
      <a href="/states/" class="text-sage hover:text-sage/80 font-medium flex items-center gap-2">
        View All States
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {topStates.map(({ state, count }) => {
        const stateCode = getStateCode(state);
        const stateSlug = getStateSlug(state);
        const fullName = getStateName(state);

        return (
          <a
            href={`/${stateSlug}/`}
            class="group block p-6 bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-transparent hover:border-sage/20 relative overflow-hidden"
          >
            <div class="absolute top-0 right-0 w-24 h-24 bg-sage/5 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"></div>
            
            <div class="flex items-center justify-between mb-4 relative z-10">
              <h3 class="text-xl font-bold text-granite group-hover:text-sage transition-colors">
                {fullName}
              </h3>
              <span class="px-3 py-1 text-xs font-bold bg-sage/10 text-sage rounded-full border border-sage/20 uppercase">
                {stateCode}
              </span>
            </div>
            <div class="flex items-center gap-2 text-gray-500 relative z-10">
              <svg class="w-5 h-5 text-sage" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
              </svg>
              <span>{count} {count === 1 ? 'Gym' : 'Gyms'}</span>
            </div>
          </a>
        );
      })}
    </div>
  </section>

  <!-- Categories Section (REVERTED) -->
  <section class="mb-16">
    <div class="flex justify-between items-center mb-8">
      <div>
        <h2 class="text-3xl font-bold text-granite mb-2">Browse by Category</h2>
        <p class="text-gray-600">Find gyms that match your specific needs</p>
      </div>
      <a href="/categories/" class="text-sage hover:text-sage/80 font-medium flex items-center gap-2">
        View All Categories
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      {topCategories.slice(0, 8).map(category => (
        <a
          href={`/categories/${category.slug}/1`}
          class="group block p-6 bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-transparent hover:border-sage/20 relative overflow-hidden"
        >
          <div class="absolute top-0 right-0 w-24 h-24 bg-sage/5 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"></div>
          
          <div class="flex items-center justify-between mb-4 relative z-10">
            <h3 class="text-xl font-bold text-granite group-hover:text-sage transition-colors">
              {category.name}
            </h3>
            <span class="px-3 py-1 text-xs font-bold bg-sage/10 text-sage rounded-full border border-sage/20 uppercase">
              {category.count} {category.count === 1 ? 'Gym' : 'Gyms'}
            </span>
          </div>
          <p class="text-gray-500 mb-4 relative z-10 leading-relaxed text-sm">{category.description}</p>
          <div class="flex items-center text-sage font-semibold relative z-10 group-hover:gap-2 transition-all text-sm">
            <span>Explore Gym</span>
            <svg class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </div>
        </a>
      ))}
    </div>
  </section>

  <!-- Getting Started Section (REVERTED) -->
  <section class="mb-16 bg-white rounded-lg shadow-md p-8 md:p-12">
    <div class="text-center mb-10">
      <h2 class="text-3xl font-bold text-granite mb-4">New to Indoor Climbing?</h2>
      <p class="text-gray-600 text-lg">We make it easy to start your climbing journey</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
      <div class="text-center">
        <div class="w-16 h-16 bg-sage/20 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl font-bold text-sage">
          1
        </div>
        <h3 class="font-bold text-granite mb-2">Find Your Gym</h3>
        <p class="text-gray-600 text-sm">
          Browse our directory of indoor climbing gyms in your city and nearby areas
        </p>
      </div>

      <div class="text-center">
        <div class="w-16 h-16 bg-sage/20 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl font-bold text-sage">
          2
        </div>
        <h3 class="font-bold text-granite mb-2">Check Amenities</h3>
        <p class="text-gray-600 text-sm">
          Filter by bouldering, top rope, lead climbing, or specialized training facilities
        </p>
      </div>

      <div class="text-center">
        <div class="w-16 h-16 bg-sage/20 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl font-bold text-sage">
          3
        </div>
        <h3 class="font-bold text-granite mb-2">Read Reviews</h3>
        <p class="text-gray-600 text-sm">
          See ratings and reviews from real climbers to find the best fit for you
        </p>
      </div>

      <div class="text-center">
        <div class="w-16 h-16 bg-sage/20 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl font-bold text-sage">
          4
        </div>
        <h3 class="font-bold text-granite mb-2">Visit & Climb</h3>
        <p class="text-gray-600 text-sm">
          Most gyms offer day passes and intro classes—perfect for first-timers
        </p>
      </div>
    </div>

    <div class="text-center">
      <a
        href="/blog/beginners-guide-to-climbing-gyms/"
        class="inline-block bg-sage text-white px-8 py-3 rounded-lg font-bold hover:bg-sage/90 transition-colors"
      >
        Read Our Beginner's Guide
      </a>
    </div>
  </section>

  <!-- Tools Section -->
  <section class="mb-16 bg-gradient-to-br from-sage/10 to-ivory rounded-lg p-8">
    <div class="mb-8">
      <h2 class="text-3xl font-bold text-granite mb-2">Climbing Tools & Calculators</h2>
      <p class="text-gray-600">Helpful tools for climbers of all levels</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <a
        href="/tools/bouldering-grade-conversion/"
        class="bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-shadow group"
      >
        <div class="flex items-center gap-3 mb-3">
          <svg class="w-8 h-8 text-sage" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
          </svg>
          <h3 class="font-bold text-granite group-hover:text-sage transition-colors text-lg">
            Bouldering Grade Converter
          </h3>
        </div>
        <p class="text-sm text-gray-600">
          Convert between V-scale, Font, and other bouldering grade systems instantly
        </p>
      </a>

      <a
        href="/tools/sport-climbing-grade-conversion/"
        class="bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-shadow group"
      >
        <div class="flex items-center gap-3 mb-3">
          <svg class="w-8 h-8 text-sage" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
          </svg>
          <h3 class="font-bold text-granite group-hover:text-sage transition-colors text-lg">
            Sport Grade Converter
          </h3>
        </div>
        <p class="text-sm text-gray-600">
          Convert between Yosemite Decimal, French, and other sport climbing grades
        </p>
      </a>

      <a
        href="/tools/cost-per-climb-calculator/"
        class="bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-shadow group"
      >
        <div class="flex items-center gap-3 mb-3">
          <svg class="w-8 h-8 text-sage" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <h3 class="font-bold text-granite group-hover:text-sage transition-colors text-lg">
            Cost Per Climb Calculator
          </h3>
        </div>
        <p class="text-sm text-gray-600">
          Calculate your actual cost per visit to see if a membership saves you money
        </p>
      </a>
    </div>

    <div class="text-center mt-8">
      <a
        href="/tools/"
        class="inline-block text-sage font-medium hover:underline"
      >
        View all tools →
      </a>
    </div>
  </section>

  <!-- FAQ Section (KEPT NEW ACCORDION STYLING) -->
  <section class="mb-12">
    <h2 class="text-3xl font-bold text-granite mb-8">
      Frequently Asked Questions
    </h2>
    <div class="space-y-4">
      <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow">
        <details class="group">
          <summary class="flex justify-between items-center font-bold text-granite cursor-pointer p-6 list-none text-lg">
            <span>How much does it cost to climb at an indoor climbing gym?</span>
            <span class="transition group-open:rotate-180">
              <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </summary>
          <div class="text-gray-600 px-6 pb-6 leading-relaxed">
            Day passes typically range from $15-$30, depending on the facility and location. Monthly memberships usually cost
            between $50-$100, with many gyms offering student discounts and family packages. Most gyms also offer punch cards
            and multi-visit packages for better value.
          </div>
        </details>
      </div>

      <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow">
        <details class="group">
          <summary class="flex justify-between items-center font-bold text-granite cursor-pointer p-6 list-none text-lg">
            <span>What should I wear to an indoor climbing gym?</span>
            <span class="transition group-open:rotate-180">
              <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </summary>
          <div class="text-gray-600 px-6 pb-6 leading-relaxed">
            Wear comfortable athletic clothing that allows full range of motion—think yoga pants, athletic shorts, or joggers
            with a t-shirt or tank top. Climbing shoes are essential (available to rent at most gyms for $3-$7). Avoid baggy
            clothes that might catch on holds, and remove jewelry before climbing.
          </div>
        </details>
      </div>

      <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow">
        <details class="group">
          <summary class="flex justify-between items-center font-bold text-granite cursor-pointer p-6 list-none text-lg">
            <span>Do I need experience to start indoor rock climbing?</span>
            <span class="transition group-open:rotate-180">
              <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </summary>
          <div class="text-gray-600 px-6 pb-6 leading-relaxed">
            No experience needed! Indoor climbing gyms welcome beginners and most offer introductory classes, belay certification
            courses, and routes marked by difficulty level. Staff members are always available to help you get started safely.
            Many gyms require a brief orientation or safety video for first-time visitors.
          </div>
        </details>
      </div>

      <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow">
        <details class="group">
          <summary class="flex justify-between items-center font-bold text-granite cursor-pointer p-6 list-none text-lg">
            <span>What's the difference between bouldering and rope climbing?</span>
            <span class="transition group-open:rotate-180">
              <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </summary>
          <div class="text-gray-600 px-6 pb-6 leading-relaxed">
            Bouldering involves climbing shorter walls (10-15 feet) without ropes, with padded mats below for protection.
            Rope climbing uses harnesses and belay systems for climbing taller walls (30-60 feet). Bouldering focuses on
            powerful, technical moves, while rope climbing emphasizes endurance and route-finding over longer distances.
          </div>
        </details>
      </div>

      <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow">
        <details class="group">
          <summary class="flex justify-between items-center font-bold text-granite cursor-pointer p-6 list-none text-lg">
            <span>Can I go to a climbing gym alone?</span>
            <span class="transition group-open:rotate-180">
              <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </summary>
          <div class="text-gray-600 px-6 pb-6 leading-relaxed">
            Absolutely! Bouldering is perfect for solo climbers since no partner is needed. For rope climbing, many gyms
            offer auto-belay systems that let you climb alone, or have staff-run belay services. Climbing gyms are also
            great places to meet other climbers and make new friends who share your passion.
          </div>
        </details>
      </div>
    </div>
  </section>

  <!-- CTA Section (REVERTED) -->
  <section class="text-center bg-sage rounded-lg p-12 text-white">
    <h2 class="text-3xl font-bold mb-4">Ready to Find Your Next Climb?</h2>
    <p class="text-lg mb-8 text-white/90">
      Explore hundreds of climbing gyms and start your adventure today
    </p>
    <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
      <a
        href="/search/"
        class="inline-block bg-white text-sage px-8 py-4 rounded-lg font-bold text-lg hover:bg-gray-100 transition-colors"
      >
        Advanced Search
      </a>
      <a
        href="/blog/"
        class="inline-block bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-white/10 transition-colors"
      >
        Read Our Guides
      </a>
    </div>
  </section>
</BaseLayout>

<style>
  /* Custom Animations (KEPT) */
  @keyframes blob {
    0% { transform: translate(0px, 0px) scale(1); }
    33% { transform: translate(30px, -50px) scale(1.1); }
    66% { transform: translate(-20px, 20px) scale(0.9); }
    100% { transform: translate(0px, 0px) scale(1); }
  }
  .animate-blob {
    animation: blob 7s infinite;
  }
  .animation-delay-2000 {
    animation-delay: 2s;
  }
  .animation-delay-4000 {
    animation-delay: 4s;
  }

  /* Fade In Up Animation (KEPT) */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translate3d(0, 40px, 0);
    }
    to {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }
  }
  .animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
    opacity: 0;
  }
  .animation-delay-150 { animation-delay: 0.15s; }
  .animation-delay-300 { animation-delay: 0.3s; }
  .animation-delay-450 { animation-delay: 0.45s; }
  .animation-delay-600 { animation-delay: 0.6s; }
</style>
